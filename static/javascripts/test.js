// Generated by CoffeeScript 1.8.0
(function() {
  $(document).ready(function() {
    var getInfo;
    $("#get_db").click(function() {
      var reqData;
      reqData = getInfo();
      return $.post('/get_db', reqData, function(body) {
        var data;
        console.log(body);
        data = JSON.parse(body);
        console.log(data);
        if (data.msg === 'ok') {
          $('#database').html('');
          $.each(data.data, function(index, dbName) {
            return $('#database').append("<option value=" + dbName + ">" + dbName + "</option>");
          });
          return alert("获取数据库成功");
        } else {
          return alert(data.msg);
        }
      });
    });
    $('#database').change(function() {
      var dbName, reqData;
      dbName = $(this).val();
      reqData = getInfo();
      reqData.db_name = dbName;
      return $.post('/get_tb', reqData, function(body) {
        var data;
        data = JSON.parse(body);
        console.log(data);
        if (data.msg === 'ok') {
          $('#tb_name').html('');
          $.each(data.data, function(index, tbName) {
            return $('#tb_name').append("<option value=" + tbName + ">" + tbName + "</option>");
          });
          return alert("获取数据库成功");
        } else {
          return alert(data.msg);
        }
      });
    });
    $('#tb_name').change(function() {
      var dbName, reqData, tbName;
      dbName = $("#database").val();
      tbName = $(this).val();
      reqData = getInfo();
      reqData.tb_name = tbName;
      reqData.db_name = dbName;
      return $.post('/get_sql_code', reqData, function(body) {
        var data;
        data = JSON.parse(body);
        return console.log(data);
      });
    });
    return getInfo = function() {
      var reqData;
      reqData = {};
      reqData.host = $("#host").val();
      reqData.name = $("#name").val();
      reqData.password = $("#password").val();
      reqData.port = $("#port").val();
      return reqData;
    };
  });

}).call(this);

//# sourceMappingURL=test.js.map
